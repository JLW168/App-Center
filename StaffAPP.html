<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLW Staff App Center</title>
    
    <!-- Theme Color for Browser UI -->
    <meta name="theme-color" content="#0f172a">

    <!-- PWA & Mobile App Meta Tags for Standalone Experience -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Add to home screen icons with the new logo -->
    <link rel="apple-touch-icon" href="https://placehold.co/180x180/4F46E5/FFFFFF?text=J&font=inter&bold">
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/4F46E5/FFFFFF?text=J&font=inter&bold">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display.swap" rel="stylesheet">
    <style>
        /* Base styles for the body in dark theme */
        body {
            font-family: "Inter", sans-serif;
            background-color: #0f172a; /* slate-900 */
            color: #cbd5e1; /* slate-300 */
        }

        /* Active navigation item styling */
        .nav-item.active {
            color: #3b82f6; /* blue-500 */
            transform: translateY(-3px);
        }
        .nav-item.active .nav-text {
            font-weight: 600;
        }

        /* Transition for nav items */
        .nav-item {
            transition: color 0.2s ease-in-out, transform 0.2s ease-in-out;
        }
        .nav-item:hover {
            color: #f1f5f9; /* slate-100 */
        }

        /* Hide scrollbars on the iframe container */
        .app-view iframe {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .app-view iframe::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
        
        /* Full-screen app container */
        .app-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-color: #0f172a; /* slate-900 */
        }

        /* Loading spinner animation */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #3b82f6; /* blue-500 */
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Media query for larger screens remains the same */
        @media (min-width: 768px) {
            .app-container {
                max-width: 100vw;
                max-height: 100vh;
                margin: 0;
                border-radius: 0;
                box-shadow: none;
            }
        }
    </style>
</head>
<body class="h-full bg-slate-900 flex items-center justify-center p-0">

    <!-- 
      Main App Container
      - Takes full width and height with a dark background.
    -->
    <div class="app-container">
        
        <!-- 
          Main Content Area
          - `flex-grow` makes this element expand to fill available vertical space.
        -->
        <main class="flex-grow relative">
            <!-- 
                Home Screen (Initial View)
                - Styled as a floating card in the dark theme.
            -->
            <div id="home-view" class="app-view absolute inset-0 p-4 sm:p-6 flex flex-col items-center justify-center text-center overflow-y-auto">
                <div class="max-w-md bg-slate-800/50 border border-slate-700 rounded-lg shadow-lg p-8">
                    <!-- Professional JLW App Center Logo -->
                    <img src="https://placehold.co/256x256/4F46E5/FFFFFF?text=J&font=inter&bold" alt="JLW App Center Logo" class="w-40 h-40 object-cover rounded-3xl mx-auto mb-5 shadow-lg">
                    
                    <h2 class="text-2xl font-extrabold text-slate-100 mb-2">JLW Staff App Center</h2>
                    <p class="text-base text-slate-300">សូមស្វាគមន៍មកកាន់មជ្ឈមណ្ឌលកម្មវិធី! នៅទីនេះអ្នកនឹងបានឃើញបន្តំនៃកម្មវិធីជាច្រើន​ដូចជារ​​ ប្រព័ន្ធគ្រប់គ្រងវត្តមាន​​​ កម្មវីធីរបាការណ៍លក់​ និងកម្មវីធីការតាមដានការងារប្រចាំថ្ងៃ។ សូមប្រើកម្មវិធីនីមួយៗ ដោយ​ទំនួលខុសត្រូវខ្ពស់​។</p>
                </div>
            </div>

            <!-- Application Views with a dynamic loading state -->
            <div id="app3-view" class="app-view hidden absolute inset-0 flex items-center justify-center text-slate-400">
                <div class="loading-container text-center">
                    <div class="spinner mx-auto mb-4"></div>
                    <p class="text-lg">Loading HR System...</p>
                </div>
                <iframe data-src="https://jlw168.github.io/App-Center/SmartHRsystem.html" frameborder="0" class="w-full h-full hidden" title="HR Management System Application"></iframe>
            </div>
            
            <div id="app4-view" class="app-view hidden absolute inset-0 flex items-center justify-center text-slate-400">
                <div class="loading-container text-center">
                    <div class="spinner mx-auto mb-4"></div>
                    <p class="text-lg">Loading Task Tracker...</p>
                </div>
                <iframe data-src="https://jlw168.github.io/App-Center/TaskTracker.html" frameborder="0" class="w-full h-full hidden" title="Task Tracking Manager Application"></iframe>
            </div>
            
            <div id="app5-view" class="app-view hidden absolute inset-0 flex items-center justify-center text-slate-400">
                <div class="loading-container text-center">
                    <div class="spinner mx-auto mb-4"></div>
                    <p class="text-lg">Loading Cash Drop...</p>
                </div>
                <iframe data-src="https://jlw168.github.io/App-Center/CDR.html" frameborder="0" class="w-full h-full hidden" title="Cash Drop Application"></iframe>
            </div>
            
            <div id="app6-view" class="app-view hidden absolute inset-0 flex items-center justify-center text-slate-400">
                <div class="loading-container text-center">
                    <div class="spinner mx-auto mb-4"></div>
                    <p class="text-lg">Loading Product...</p>
                </div>
                <iframe data-src="https://jlw168.github.io/App-Center/ProductSearch.html" frameborder="0" class="w-full h-full hidden" title="Product Search Application"></iframe>
            </div>

        </main>

        <!-- 
          Bottom Navigation Bar
          - Styled with a semi-transparent dark background and subtle top border.
        -->
        <nav class="bg-slate-800/50 p-1 flex-shrink-0 border-t border-slate-700">
            <ul class="flex justify-around items-center h-14">
                <!-- Navigation items with single-color SVG icons that adapt to the theme -->
                <li><a href="#" class="nav-item flex flex-col items-center p-1 text-slate-400" data-target="home-view"><svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L1 12h3v8h6v-6h4v6h6v-8h3L12 2z"></path></svg><span class="text-xs font-medium nav-text">Home</span></a></li>
                <li><a href="#" class="nav-item flex flex-col items-center p-1 text-slate-400" data-target="app3-view"><svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,19.2C9.5,19.2 7.29,17.92 6,16C6,14 10,12.9 12,12.9C14,12.9 18,14 18,16C16.71,17.92 14.5,19.2 12,19.2Z"/></svg><span class="text-xs font-medium nav-text">HR</span></a></li>
                <li><a href="#" class="nav-item flex flex-col items-center p-1 text-slate-400" data-target="app4-view"><svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor"><path d="M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M10.41,16.59L6.83,13L8.24,11.59L10.41,13.76L15.76,8.41L17.17,9.83L10.41,16.59Z"/></svg><span class="text-xs font-medium nav-text">Task</span></a></li>
                <li><a href="#" class="nav-item flex flex-col items-center p-1 text-slate-400" data-target="app5-view"><svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor"><path d="M19,3H5C3.89,3 3,3.89 3,5V19C3,20.11 3.89,21 5,21H19C20.11,21 21,20.11 21,19V5C21,3.89 20.11,3 19,3M7,7H9V9H7V7M7,11H9V13H7V11M7,15H9V17H7V15M11,17H17V15H11V17M11,13H17V11H11V13M11,9H17V7H11V9Z"/></svg><span class="text-xs font-medium nav-text">CDR</span></a></li>
                <li><a href="#" class="nav-item flex flex-col items-center p-1 text-slate-400" data-target="app6-view"><svg class="w-6 h-6 mb-1" viewBox="0 0 24 24" fill="currentColor"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg><span class="text-xs font-medium nav-text">Product</span></a></li>
            </ul>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navItems = document.querySelectorAll('.nav-item');
            const appViews = document.querySelectorAll('.app-view');

            /**
             * Handles the click event for navigation items.
             * It updates the active state of the navigation and switches the displayed app view.
             * It now loads iframe content on the first click to improve performance.
             * @param {Event} event - The click event object.
             */
            const handleNavClick = (event) => {
                event.preventDefault();
                const clickedItem = event.currentTarget;
                const targetId = clickedItem.dataset.target;

                // Update navigation item styles
                navItems.forEach(item => item.classList.remove('active'));
                clickedItem.classList.add('active');
                
                // Hide all app views
                appViews.forEach(view => {
                    view.classList.add('hidden');
                });

                // Show the target view
                const targetView = document.getElementById(targetId);
                if (targetView) {
                    targetView.classList.remove('hidden');

                    const iframe = targetView.querySelector('iframe');
                    const loadingContainer = targetView.querySelector('.loading-container');

                    // If the view has an iframe and its src hasn't been set yet
                    if (iframe && !iframe.src) {
                        // Show loading spinner and hide the iframe container
                        if (loadingContainer) loadingContainer.classList.remove('hidden');
                        iframe.classList.add('hidden');

                        // Set the onload event for the iframe
                        iframe.onload = () => {
                            // Once loaded, hide loading spinner and show the iframe
                            if (loadingContainer) loadingContainer.classList.add('hidden');
                            iframe.classList.remove('hidden');
                        };
                        
                        // Set the src from data-src to trigger loading
                        iframe.src = iframe.dataset.src;
                    }
                }
            };

            // Attach event listeners to all navigation items
            navItems.forEach(item => {
                item.addEventListener('click', handleNavClick);
            });

            // Set initial state to Home on page load by simulating a click
            document.querySelector('.nav-item[data-target="home-view"]').click();
        });
    </script>

</body>
</html>

